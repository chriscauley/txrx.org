

server {
	listen 80;
	root /home/website/txrx.org;
	server_name classes.txrxlabs.com;
	access_log  /home/website/txrx.org/logs/access.log;
	error_log  /home/website/txrx.org/logs/error.log;
	
	client_max_body_size 16M;
  client_body_buffer_size 128k;

	location /media  {
		autoindex on;
		alias  /home/website/txrx.org/media;
	}
	
	location /static  {
    autoindex on;
    alias  /home/website/txrx.org/static;
  }
	
	location /media/admin  {
		autoindex on;	
		alias /home/website/txrx.org/env/lib/python2.7/django/contrib/admin/media;
	}
	
	location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 120;
        proxy_read_timeout 180;
        proxy_pass http://localhost:8100/;
    }
    
    error_page 500 502 503 504 /media/50x.html;
}
