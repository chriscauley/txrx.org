{% extends "base.html" %}
{% load url from future %}
{% load thumbnail %}

{% block title %}Classes {{ term.name }}{% endblock %}
{% block header %}{% endblock %}

{% block content %}
<div class="page-header" style="margin: -10px 0 20px;">
  <h1 class="home-tagline">
    {{ term.name }} Classes
    <div class="calendar_widget" style="display: inline-block; padding-left: 50px; font-size:0.7em;">
      (<a href="javascript:;" onclick="$('.add_to_calendar').toggle()">Subscribe to calendar</a>)
      {% include "event/_subscribe_to_calendar.html" with calendar_event=occurrence %}
    </div>
  </h1>
</div>
{% comment %}
{% if "success" in request.GET %}
<b>
  You have been enrolled in your classes.
  {% if not request.user.is_authenticated %}
  <br />
  If you haven't already, please click
  <a href="{% url "password_reset" %}">reset your password</a>.
  <br />
  Otherwise click please <a href="/accounts/login/">log in</a>.
  {% endif %}
</b>
{% endif %}
<p class="lead">
  {% if all_sessions_closed %}
  All sessions for this term are closed. Come back soon to see our next round of classes!
  {% elif not request.user.is_authenticated %}
  You can register for classes without logging in. Once you pay, a txrx account will be made using your paypal email address, and instructions on how to view your course schedule will be sent to that email address. If you have any problems feel free to write to classes@txrxlabs.org
  {% elif not request.user.enrollment_set.count %}
  Our records show you've never registered for a class before. If this is in error you should contact classes@txrxlabs.org and we'll adjust our records.
  {% else %}
  Here are all upcoming classes at the hackerspace. If you have any questions email classes@txrxlabs.org or stop by the hackerspace.
  {% endif %}
</p>
{% endcomment %}
{% if request.user.is_authenticated %}
{# TODO: my classes widget #}
{% else %}
<p>
  Already signed up? <a href="/accounts/login/">Log in</a> to see your classes.<br />
  If not, an account will be automatically created when you first pay for a class.
</p>
{% endif %}
{% include "widgets/filters.html" %}
{% for week in weeks %}
<div class="week {{ week.open }}">
  <h4>Classes starting {{ week.0 }} - {{ week.1 }}</h4>
  <table class="table table-hover class-table">
    {% for session in week.sessions %}
    {% include "course/_session_row.html" %}
    {% endfor %}
  </table>
</div>
{% endfor %}
{% endblock %}

{% block side %}
{% include "course/_cart.html" %}
{% endblock %}
