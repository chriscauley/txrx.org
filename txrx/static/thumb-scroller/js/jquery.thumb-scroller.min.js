(function(u){var L="ontouchstart" in window;var t="thumbScroller";var I=400;var f=50;var J="tsRefreshInfo";var h="tsRefreshButtons";var d="tsRefreshScrubber";var r="tsRefreshNav";var K="tsCollapseNav";var k="tsResizeScrollbar";var p="tsCollapseScrollbar";var D="tsStartTimer";var y="tsResumeTimer";var b="tsLoadContent";var C="tsPauseOnAction";var s="scrollerInit";var e="scrollerPlay";var c="scrollerPause";var g="scrollerPrevious";var E="scrollerNext";var m="scrollerBegin";var H="scrollerEnd";var q=a(6);var o=a(7);var z="tsMsie6Resize";j("transition");j("transform");j("box-sizing");function i(O,M){this._options=M;this._isVertical=("vertical"===M.orientation);this._collapsible=M.collapsible&&!this._isVertical;this._responsive=!this._collapsible&&M.responsive;var N=!(o&&this._responsive);this._numDisplay=G(M.numDisplay,4);this._slideWidth=G(M.slideWidth,300);this._slideHeight=G(M.slideHeight,200);this._slideMargin=(N?F(M.slideMargin,0):0);this._borderWidth=(N?F(M.slideBorder,0):0);this._captionHeight=F(M.captionHeight,"auto");this._rotate=M.autoPlay;this._delay=G(M.delay,5000);this._duration=G(M.speed,800);this._easing=M.easing;this._$scroller;this._$slidePanel;this._$slideList;this._$slides;this._$navList;this._$scrollbar;this._$scrubber;this._$scroller=u(O);this._namespace="."+((typeof this._$scroller.attr("id")!=="undefined")?this._$scroller.attr("id"):"scroller");this._numItems;this._limit;this._currIndex=0;this._timerId=null;this._resumeId=null;this._startX=null;this._startY=null;this._swipeDist=null;this._scrolling;this.init()}i.prototype={init:function(){this._$scroller.addClass(this._isVertical?"ts-vertical":"ts-horizontal");this._$slideList=this._$scroller.find(">ul").addClass("ts-list");this._$slides=this._$slideList.find(">li").addClass("ts-slide");this._$slideList.wrap(u("<div></div>").addClass("ts-container"));this._$slidePanel=this._$slideList.parent();this._numItems=this._$slides.length;this._numDisplay=Math.min(this._numDisplay,this._numItems);var M=("index"===this._options.control?this._numDisplay*Math.ceil(this._numItems/this._numDisplay):this._numItems);this._limit=M-this._numDisplay;this._currIndex=Math.min(F(this._options.startIndex,0),this._limit);if(this._options.shuffle){this.shuffleItems()}this.initSlides();this.initSlidePanel();this.initHeader();this.initControl();this.initContainer();if(this._collapsible){this._minDisplay=parseInt(this._options.minDisplay,0);if(isNaN(this._minDisplay)||this._minDisplay<1){this._minDisplay=1}this._maxDisplay=parseInt(this._options.maxDisplay,0);if(isNaN(this._maxDisplay)){this._maxDisplay=this._numDisplay}else{if(this._maxDisplay>this._numItems){this._maxDisplay=this._numItems}}this.collapse();u(window).bind("resize"+this._namespace,u.proxy(this.collapse,this))}else{if(this._responsive){this.resize();u(window).bind("resize"+this._namespace,u.proxy(this.resize,this))}}if(L){if(this._options.swipe){this._$slidePanel.bind("touchstart",u.proxy(this.touchStart,this))}}else{if(this._options.mousewheel){this._$scroller.bind("mousewheel DOMMouseScroll",u.proxy(this.mouseScroll,this))}if(this._options.pauseOnHover){this._$scroller.hover(u.proxy(this.pause,this),u.proxy(this.play,this))}}if(this._options.keyboard){u(document).bind("keyup"+this._namespace,u.proxy(this.keyControl,this))}if(this._options.pauseOnInteraction){this._$scroller.bind(C,u.proxy(this.pause,this))}this._$scroller.bind(D,u.proxy(this.startTimer,this));this.updateSlideList(false)},collapse:function(){this.pauseTimer();var O=this._$scroller.parent().width()-(this._$scroller.outerWidth(true)-this._$scroller.width());var M=Math.floor(O/this._$slides.outerWidth());if(M!=this._numDisplay&&this._minDisplay<=M&&M<=this._maxDisplay){this._numDisplay=M;this._$slidePanel.width(this._numDisplay*this._$slides.outerWidth());this._$scroller.width(this._$slidePanel.width());if("index"===this._options.control){var N=this._numDisplay*Math.ceil(this._numItems/this._numDisplay);this._limit=N-this._numDisplay;this._currIndex=Math.floor(this._currIndex/this._numDisplay)*this._numDisplay}else{this._limit=this._numItems-this._numDisplay;if(this._currIndex>this._limit){this._currIndex=this._limit}}this._$scroller.trigger(K).trigger(p);this.updateSlideList(false)}},resize:function(){this.pauseTimer();var M=this._$slides.find(">.ts-wrapper"),N=M.width()/this._slideWidth;M.height(Math.round(N*this._slideHeight));this._$slides.find(">.ts-caption").outerHeight(Math.round(N*this._captionHeight));if(this._isVertical){this._$slidePanel.height(this._numDisplay*this._$slides.outerHeight());this._$slideList.css({top:-this._currIndex*this._$slides.outerHeight()})}else{this._$slidePanel.height(this._$slides.outerHeight());this._$slideList.css({left:-this._currIndex*this._$slides.outerWidth()})}this._$scroller.height(this._$slidePanel.height()+this._$scroller.find(">.ts-header").outerHeight(true)+this._$scroller.find(">.ts-control").outerHeight(true));this._$slides.each(u.proxy(function(Q,O){var P=u(O).find(".ts-caption");P.css({fontSize:Math.floor(P.data("fontSize")*N)+"px",lineHeight:Math.floor(P.data("lineHeight")*N)+"px"})},this));this._$scroller.trigger(k).trigger(z)},initContainer:function(){var R=F(this._options.padding,0),N=this._$scroller.find(">.ts-prev"),Q=this._$scroller.find(">.ts-next"),M=this._$scroller.find(">.ts-header"),P=this._$scroller.find(">.ts-control"),O;if(!this._responsive){this._$scroller.width(this._$slidePanel.width()).height(this._$slidePanel.height()+M.outerHeight(true)+P.outerHeight(true))}if(this._isVertical){O={paddingLeft:R,paddingRight:R};if(0===N.length&&0===M.length){O.paddingTop=R}if(0===Q.length&&0===P.length){O.paddingBottom=R}this._$scroller.css(O);if(q){this._$scroller.bind(z,u.proxy(function(){N.width(this._$scroller.outerWidth(true));Q.width(this._$scroller.outerWidth(true))},this)).trigger(z)}}else{O={};if(0===M.length){O.paddingTop=R}if(0===N.length){O.paddingLeft=R}if(0===Q.length){O.paddingRight=R}if(0===P.length){O.paddingBottom=R}this._$scroller.css(O);if(q){this._$scroller.bind(z,u.proxy(function(){N.height(this._$scroller.outerHeight(true));Q.height(this._$scroller.outerHeight(true))},this)).trigger(z)}}this.setOptColor(this._$scroller.add(N).add(Q),this._options.backgroundColor,"backgroundColor");this.setOptColor(this._$scroller,this._options.color,"color")},initSlides:function(){if("outside"===this._options.captionPosition){this._$slides.addClass("ts-outside").one("tsInitCaption",u.proxy(this.initExtCaption,this))}else{this._$slides.addClass("ts-inside").one("tsInitCaption",u.proxy(this.initCaption,this))}this._$slides.each(u.proxy(function(V,S){var U=u(S).wrapInner(u("<div></div>").addClass("ts-wrapper")),T=U.find(">.ts-wrapper").css({borderWidth:this._borderWidth});U.data({"image-position":B(U.data("image-position"),this._options.imagePosition),"caption-align":B(U.data("caption-align"),this._options.captionAlign),"caption-effect":B(U.data("caption-effect"),this._options.captionEffect),"caption-button":B(U.data("caption-button"),this._options.captionButton)});if(this._options.pauseOnInteraction){T.click(u.proxy(this.pause,this))}if(l(U.data("src"))){var O=T.find(">a:not(.ts-link-button, .ts-zoom-button)").first(),P;if(O.length){O.data({title:O.attr("title")}).removeAttr("title");P=O.find(">:first-child")}else{P=T.find(">:first-child")}if(P.length){P.addClass("ts-content");if(P.is("img")){P.one("load",u.proxy(this.processImg,this));if(P[0].complete||"complete"===P[0].readyState){P.trigger("load")}}}}else{U.one(b,u.proxy(this.processContent,this))}var Q=T.find(">a.ts-link-button"),R=T.find(">a.ts-zoom-button");if(R.length){R.data({title:R.attr("title")}).removeAttr("title");if(Q.length){Q.addClass("ts-button-align-right");R.addClass("ts-button-align-left")}}U.trigger("tsInitCaption")},this));if("outside"===this._options.captionPosition){var M=this._$slides.find(">.ts-caption");if(isNaN(this._captionHeight)){var N=this._$slides.find(">.ts-wrapper");M.outerWidth(this._slideWidth+(N.outerWidth()-N.width())).outerHeight(Math.max.apply(null,M.map(function(){return u(this).outerHeight()}).get()));this._captionHeight=M.outerHeight();M.outerWidth("100%")}else{M.outerHeight(this._captionHeight)}}},initExtCaption:function(N){var M=u(N.currentTarget),O=M.find(">.ts-wrapper").find(">:not(a,img,.ts-content,.ts-overlay)").first();if(1>O.length){O=u("<div></div>")}O.addClass("ts-caption");if("top"===M.data("caption-align")){M.prepend(O)}else{M.append(O)}O.data({fontSize:parseInt(O.css("fontSize"),0),lineHeight:parseInt(O.css("lineHeight"),0)})},initCaption:function(Q){var P=u(Q.currentTarget),O=P.find(">.ts-wrapper"),R=O.find(">:not(a,img,.ts-content,.ts-overlay)").first();if(R.length){var M=("top"===P.data("caption-align"));R.addClass("ts-caption").css(M?"top":"bottom",0).data({fontSize:parseInt(R.css("fontSize"),0),lineHeight:parseInt(R.css("lineHeight"),0)});if(!isNaN(this._captionHeight)){if(this._responsive){R.outerHeight((this._captionHeight/this._slideHeight*100)+"%")}else{R.outerHeight(this._captionHeight)}}if(P.data("caption-button")){var N=u("<div><div></div></div>").addClass("ts-caption-button").css(M?"bottom":"top",0).click(u.proxy(this.toggleCaption,this)).mousedown(x);O.append(N);this.bindCaptionEvents(P,"tsShowCaption","tsHideCaption")}else{if(!L){this.bindCaptionEvents(P,"mouseenter","mouseleave")}}}},bindCaptionEvents:function(R,M,Q){var P=R.find(">.ts-wrapper");var T=P.find(">.ts-caption");switch(R.data("caption-effect")){case"slide":if(u.support.transition&&u.support.transform){var N;if("top"===R.data("caption-align")){N="ts-slide-down";T.css({top:"auto",bottom:"100%"})}else{N="ts-slide-up";T.css({top:"100%",bottom:"auto"})}P.bind(M,function(){T.addClass(N)}).bind(Q,function(){T.removeClass(N)})}else{var S=("top"===R.data("caption-align")?"top":"bottom");T.css(S,"-100%");P.bind(M,{position:S},this.slideInCaption).bind(Q,{position:S},this.slideOutCaption)}break;case"fade":T.css({opacity:0});P.bind(M,this.fadeInCaption).bind(Q,this.fadeOutCaption);break;case"normal":T.hide();P.bind(M,function(){T.show()}).bind(Q,function(){T.hide()});break;default:var O=P.find(">.ts-caption-button");if(O.length){P.find(">.ts-caption-button").addClass("ts-collapse");P.bind(M,function(){T.show()}).bind(Q,function(){T.hide()})}break}},initSlidePanel:function(){var N=("index"===this._options.control?this._numDisplay*Math.ceil(this._numItems/this._numDisplay):this._numItems);var M=this._$slides.find(">.ts-wrapper");if(this._responsive){this._$slides.addClass("ts-border-box");if(this._isVertical){this._$slides.width("100%").css({paddingTop:this._slideMargin,paddingBottom:this._slideMargin});this._$slideList.width("100%")}else{this._$slides.width((1/this._numItems*100)+"%").css({paddingLeft:this._slideMargin,paddingRight:this._slideMargin});this._$slideList.width((this._numItems/this._numDisplay*100)+"%")}}else{M.width(this._slideWidth).height(this._slideHeight);this._$slides.width(M.outerWidth()).height(M.outerHeight()+this._$slides.find(">.ts-caption").outerHeight());if(this._isVertical){this._$slides.css({paddingTop:this._slideMargin,paddingBottom:this._slideMargin});this._$slideList.height(N*this._$slides.outerHeight()).width(this._$slides.outerWidth());this._$slidePanel.height(this._numDisplay*this._$slides.outerHeight()).width(this._$slides.outerWidth())}else{this._$slides.css({paddingLeft:this._slideMargin,paddingRight:this._slideMargin});this._$slideList.width(N*this._$slides.outerWidth()).height(this._$slides.outerHeight());this._$slidePanel.width(this._numDisplay*this._$slides.outerWidth()).height(this._$slides.outerHeight())}}this.setOptColor(M,this._options.slideBackgroundColor,"backgroundColor");this.setOptColor(M,this._options.slideBorderColor,"borderColor")},initHeader:function(){var P=!l(this._options.title)&&false!==this._options.title,O=this._options.pageInfo,N=this._options.playButton;if(P||O||N||"small"===this._options.navButtons){var Q=u("<div></div>").addClass("ts-header");this._$scroller.prepend(Q);if(P){Q.append(u("<div></div>").addClass("ts-title").html(this._options.title))}if(N){Q.append(u("<div><div></div></div>").addClass("ts-play-button").toggleClass("ts-pause",!this._rotate).click(u.proxy(this.togglePlay,this)))}if(O){var M=u("<div></div>").addClass("ts-page-info");Q.append(M);this._$scroller.bind(J,u.proxy(function(){var S=this._currIndex+1,R=Math.min(this._currIndex+this._numDisplay,this._numItems);M.text((S!=R?(S+"-"+R):S)+" of "+this._numItems)},this))}}},initControl:function(){this.initButtons();if("scrollbar"===this._options.control||"index"===this._options.control){this._$scroller.append(u("<div></div>").addClass("ts-control"));if("scrollbar"===this._options.control){this.initScrollbar()}else{this.initNav()}}},initButtons:function(){if(false!==this._options.navButtons&&"none"!==this._options.navButtons){var N=u("<div><div></div></div>"),R=u("<div><div></div></div>"),O=N.add(R);if("hover"===this._options.navButtons||"mouseover"===this._options.navButtons){N.addClass("ts-hover-prev");R.addClass("ts-hover-next");this._$slidePanel.append(O);var Q=("+="+(this._slideMargin+this._borderWidth));if(this._isVertical){N.css({marginTop:Q});R.css({marginBottom:Q})}else{N.css({marginLeft:Q});R.css({marginRight:Q})}if(L){O.css({opacity:1})}else{if(u.support.transition){O.addClass("ts-css-hover")}else{this._$slidePanel.hover(function(){O.animate({opacity:1},{duration:I,queue:false})},function(){O.animate({opacity:0},{duration:I,queue:false})})}}}else{if("small"===this._options.navButtons){var M=this._$scroller.find(">.ts-header"),P=M.find(">.ts-play-button");N.addClass("ts-small-prev");R.addClass("ts-small-next");if(P.length){P.before(R).after(N)}else{M.prepend(N).prepend(R)}}else{N.addClass("ts-prev");R.addClass("ts-next");this._$scroller.append(O).css({overflow:"visible"});if(this._isVertical){this._$scroller.css({marginTop:N.outerHeight(),marginBottom:R.outerHeight()});N.css({top:-N.outerHeight()});R.css({bottom:-R.outerHeight()})}else{this._$scroller.css({marginLeft:N.outerWidth(),marginRight:R.outerWidth()});N.css({left:-N.outerWidth()});R.css({right:-R.outerWidth()})}}}N.click(u.proxy(this.prevSlides,this));R.click(u.proxy(this.nextSlides,this));if(!this._options.continuous){this._$scroller.bind(h,u.proxy(function(){N.toggleClass("ts-disabled",0===this._currIndex);R.toggleClass("ts-disabled",this._limit==this._currIndex)},this))}}},initScrollbar:function(){var N=this._$scroller.find(">.ts-control");this._$scrubber=u("<div></div>").addClass("ts-scrubber");this._$scrollbar=u("<div></div>").addClass("ts-scrollbar").append(this._$scrubber);N.append(this._$scrollbar);if(!this._isVertical){N.css({paddingLeft:this._slideMargin,paddingRight:this._slideMargin})}this._$scrollbar.click(u.proxy(function(O){this._$scroller.trigger(C);this.autoStop((O.pageX-this._$scrollbar.offset().left)/this._$scrollbar.width())},this)).mousedown(x);this._$scrubber.width((this._numDisplay/this._numItems*100)+"%").click(function(O){O.stopPropagation()});try{this._$scrubber.draggable({containment:"parent",start:u.proxy(function(){this._$scroller.trigger(C);this.stopTimer();this._$scroller.unbind(D)},this),stop:u.proxy(function(){this._$scroller.unbind(D).bind(D,u.proxy(this.startTimer,this));this.autoStop(this._$scrubber.position().left/(this._$scrollbar.width()-this._$scrubber.width()))},this),drag:this._isVertical?u.proxy(this.scrubVertical,this):u.proxy(this.scrubHorizontal,this)})}catch(M){}this._$scroller.bind(d,u.proxy(function(P,O){var Q=Math.round(this._currIndex/this._limit*(this._$scrollbar.width()-this._$scrubber.width()));if(O){this._$scrubber.animate({left:Q},{duration:this._duration,easing:this._easing,queue:false})}else{this._$scrubber.css({left:Q})}},this));if(this._collapsible){this._$scroller.bind(p,u.proxy(this.collapseScrollbar,this))}else{if(this._responsive){this._$scroller.bind(k,u.proxy(this.resizeScrollbar,this))}}},scrubHorizontal:function(N){var M=(this._$slideList.width()-this._$slidePanel.width())/(this._$scrollbar.width()-this._$scrubber.width());this._$slideList.css({left:-Math.round(this._$scrubber.position().left*M)})},scrubVertical:function(N){var M=(this._$slideList.height()-this._$slidePanel.height())/(this._$scrollbar.width()-this._$scrubber.width());this._$slideList.css({top:-Math.round(this._$scrubber.position().left*M)})},resizeScrollbar:function(){var M=(this._$scrollbar.width()-this._$scrubber.width()),N=this._currIndex/this._limit;this._$scrubber.stop(true).css({left:Math.round(N*M)})},collapseScrollbar:function(){this._$scrubber.width((this._numDisplay/this._numItems*100)+"%");this.resizeScrollbar()},initNav:function(){this._$navList=u('<ul class="ts-nav"></ul>');this._$scroller.find(">.ts-control").append(this._$navList);this.initNavItems();this._$navList.on("click",">li",u.proxy(this.selectNav,this)).on("mousedown",">li",x);this._$scroller.bind(r,u.proxy(function(){var M=Math.floor(this._currIndex/this._numDisplay);this._$navList.find(">li").removeClass("ts-active").eq(M).addClass("ts-active")},this));if(this._collapsible){this._$scroller.bind(K,u.proxy(this.initNavItems,this))}},selectNav:function(N){this._$scroller.trigger(C);var M=u(N.currentTarget);if(!M.hasClass("ts-active")){this._currIndex=M.index()*this._numDisplay;this.updateSlideList(true)}},initNavItems:function(){var O=Math.ceil(this._numItems/this._numDisplay);this._$navList.empty();if(1<O){for(var N=0;N<O;N++){this._$navList.append(u("<li></li>"))}var M=this._$navList.find(">li");this._$navList.width(M.length*M.outerWidth(true))}},updateSlideList:function(M){this.stopTimer();var P={};if(this._isVertical){P.top=-this._currIndex*this._$slides.outerHeight()}else{P.left=-this._currIndex*this._$slides.outerWidth()}if(M){this._$slideList.stop(true).animate(P,this._duration,this._easing,u.proxy(function(){this._$scroller.trigger(D)},this))}else{this._$slideList.stop(true).css(P);this._$scroller.trigger(D)}this._$scroller.trigger(J).trigger(h).trigger(d,[M]).trigger(r);if(0===this._currIndex){this._$scroller.trigger(m);this._options.onBegin.call(this)}if(this._currIndex==this._limit){this._$scroller.trigger(H);this._options.onEnd.call(this);if(this._options.playOnce){this.pause()}}var O=Math.min(this._currIndex+this._numDisplay,this._numItems);for(var N=this._currIndex;N<O;N++){this._$slides.eq(N).trigger(b)}},autoStop:function(Q){var M,O,N;if(this._isVertical){O=this._$slides.outerHeight();N=this._$slideList.height()-this._$slidePanel.height()}else{O=this._$slides.outerWidth();N=this._$slideList.width()-this._$slidePanel.width()}var P=Q*N,R=this._currIndex*O;if(P>R){M=Math.ceil(P/O)}else{if(P<R){M=Math.floor(P/O)}else{return}}this._currIndex=Math.min(M,this._limit);this.updateSlideList(true)},prevSlides:function(){this._$scroller.trigger(C);if(this._currIndex>0){this._currIndex-=(this._options.moveByOne?1:Math.min(this._numDisplay,this._currIndex))}else{if(this._options.continuous){this._currIndex=this._limit}else{return}}this._$scroller.trigger(g);this._options.onPrevious.call(this);this.updateSlideList(true)},nextSlides:function(){this._$scroller.trigger(C);if(this._currIndex<this._limit){this._currIndex+=this._options.moveByOne?1:Math.min(this._numDisplay,this._limit-this._currIndex)}else{if(this._options.continuous){this._currIndex=0}else{return}}this._$scroller.trigger(E);this._options.onNext.call(this);this.updateSlideList(true)},rotateSlides:function(){if(this._currIndex<this._limit){this._currIndex+=this._options.moveByOne?1:Math.min(this._numDisplay,this._limit-this._currIndex)}else{this._currIndex=0}this.updateSlideList(true)},togglePlay:function(){if(this._rotate){this.pause()}else{this.play()}},play:function(){if(!this._rotate){this._$scroller.find(">.ts-header>.ts-play-button").removeClass("ts-pause");this._rotate=true;this._$scroller.trigger(D).trigger(e);this._options.onPlay.call(this)}},pause:function(){if(this._rotate){this._$scroller.find(">.ts-header>.ts-play-button").addClass("ts-pause");this._rotate=false;this.stopTimer();this._$scroller.trigger(c);this._options.onPause.call(this)}},processContent:function(T){var P=u(T.currentTarget),S=P.find(">.ts-wrapper"),N=P.data("src"),X=P.data("content-type");if(l(X)){X=A(N)}S.find(">img:first-child, >.ts-content").remove();var Z=S;var U=S.find(">a:first-child:not(.ts-link-button, .ts-zoom-button)");if(U.length){Z=U}if("image"===X){var M=u("<img/>").addClass("ts-content");Z.prepend(M);M.one("load",u.proxy(this.processImg,this)).attr("src",N);if(M[0].complete||"complete"===M[0].readyState){M.trigger("load")}}else{if("inline"===X){var aa=u(N);if(aa.length){Z.prepend(u("<div></div>").addClass("ts-content").html(aa.html()));this.showContent(P)}}else{if("flash"===X){var Q="<object type='application/x-shockwave-flash' data='"+N+"' width='100%' height='100%'><param name='movie' value='"+N+"'/><param name='allowFullScreen' value='true'/><param name='quality' value='high'/><param name='wmode' value='transparent'/><param name='scale' value='default'></object>";Z.prepend(u("<div></div>").addClass("ts-content").html(Q));this.showContent(P)}else{if("ajax"===X){var V=u("<div></div>").addClass("ts-content");Z.prepend(V);var R=N.indexOf("?"),W="";if(-1<R){W=N.substring(R+1);N=N.substring(0,R)}var O=P.data("method");if(l(O)){O="GET"}u.ajax({url:N,type:O,data:W,success:u.proxy(function(ab){V.html(ab);this.showContent(P)},this)})}else{var Y=u('<iframe frameborder="0" hspace="0" scrolling="auto" width="100%" height="100%"></iframe>').addClass("ts-content");Z.prepend(Y);Y.load(u.proxy(function(){this.showContent(P)},this)).attr("src",N)}}}}},processImg:function(S){var N=u(S.currentTarget),R=N.closest(".ts-slide");switch(R.data("image-position")){case"fill":this.fillContent(N,this._slideWidth,this._slideHeight);break;case"fit":this.fitContent(N,this._slideWidth,this._slideHeight);break;case"center":this.centerContent(N,this._slideWidth,this._slideHeight);break;case"stretch":this.stretchContent(N,this._slideWidth,this._slideHeight);break}if(this._responsive){var Q=parseInt(N.css("top"),0);Q=isNaN(Q)?0:((Q/this._slideHeight*100)+"%");var P=parseInt(N.css("left"),0);P=isNaN(P)?0:((P/this._slideWidth*100)+"%");var O=(N.width()/this._slideWidth*100)+"%",M=(N.height()/this._slideHeight*100)+"%";N.css({top:Q,left:P,bottom:"auto",right:"auto"}).width(O).height(M)}if(u.support.opacity){N.after(u("<div></div>").addClass("ts-overlay"))}this.showContent(R)},centerContent:function(M,N,O){M.css({top:(O-M.height())/2,left:(N-M.width())/2})},fillContent:function(N,P,R){var O=N.width(),M=N.height(),Q=Math.max(R/M,P/O);N.width(O*Q).height(M*Q);this.centerContent(N,P,R)},fitContent:function(N,R,S){var P=N.width(),M=N.height(),Q=R/S,O=P/M;if(Q>O){P*=S/M;M=S}else{M*=R/P;P=R}N.width(P).height(M);this.centerContent(N,R,S)},stretchContent:function(M,N,O){M.css({top:0,left:0,width:N,height:O})},showContent:function(M){M.find(">.ts-wrapper").css({backgroundImage:"none"}).find(".ts-content").css({opacity:1})},toggleCaption:function(O){this._$scroller.trigger(C);var N=u(O.currentTarget),M=N.parent(),Q=M.find(">.ts-caption"),P=N.hasClass("ts-collapse");if(P){M.trigger("tsHideCaption");N.removeClass("ts-collapse")}else{M.trigger("tsShowCaption");N.addClass("ts-collapse")}},slideInCaption:function(N){var O=u(N.currentTarget).find(">.ts-caption"),M={};M[N.data.position]=0;O.animate(M,{duration:I,queue:false})},slideOutCaption:function(N){var O=u(N.currentTarget).find(">.ts-caption"),M={};M[N.data.position]="-100%";O.animate(M,{duration:I,queue:false})},fadeInCaption:function(M){u(M.currentTarget).find(">.ts-caption").animate({opacity:1},{duration:I,queue:false})},fadeOutCaption:function(M){u(M.currentTarget).find(">.ts-caption").animate({opacity:0},{duration:I,queue:false})},shuffleItems:function(){var M=this._$slides.toArray();n(M);this._$slideList.append(M)},startTimer:function(){if(null===this._timerId&&this._rotate){this._timerId=setTimeout(u.proxy(this.rotateSlides,this),this._delay)}},stopTimer:function(){clearTimeout(this._timerId);this._timerId=null},pauseTimer:function(){this.stopTimer();this._$scroller.unbind(D);clearTimeout(this._resumeId);this._resumeId=setTimeout(u.proxy(function(){this._$scroller.unbind(D).bind(D,u.proxy(this.startTimer,this)).trigger(D)},this),1000)},setOptColor:function(N,M,O){if(typeof M!=="undefined"){if("backgroundColor"===O||"background-color"===O){if(""===u.trim(M)){M="transparent"}}N.css(O,M)}},mouseScroll:function(M){M.preventDefault();if(!this._$slideList.is(":animated")){var N=(typeof M.originalEvent.wheelDelta==="undefined")?-M.originalEvent.detail:M.originalEvent.wheelDelta;if(0<N){this.prevSlides()}else{this.nextSlides()}}},keyControl:function(M){switch(M.keyCode){case 37:this.prevSlides();break;case 39:this.nextSlides();break;case 80:this.togglePlay();break}},touchStart:function(M){if(1===M.originalEvent.touches.length){this._startX=M.originalEvent.touches[0].pageX;this._startY=M.originalEvent.touches[0].pageY;this._$slidePanel.bind("touchmove",u.proxy(this.touchMove,this)).one("touchend",u.proxy(this.touchEnd,this))}},touchMove:function(O){var M=this._startX-O.originalEvent.touches[0].pageX;var N=this._startY-O.originalEvent.touches[0].pageY;if(this._isVertical){this._swipeDist=N;this._scrolling=Math.abs(this._swipeDist)<Math.abs(M)}else{this._swipeDist=M;this._scrolling=Math.abs(this._swipeDist)<Math.abs(N)}if(!this._scrolling){O.preventDefault()}},touchEnd:function(M){this._$slidePanel.unbind("touchmove");if(!this._scrolling){if(null!==this._swipeDist&&Math.abs(this._swipeDist)>f){if(this._swipeDist>0){if(this._currIndex<this._limit){this.nextSlides()}}else{if(this._currIndex>0){this.prevSlides()}}}}this._startX=this._startY=this._swipeDist=null},processFlickr:function(){var M=this._options.flickr;u.getJSON(M,u.proxy(function(O){this._options.title=O.title;var N="<ul>";u.each(O.items,u.proxy(function(Q,P){N+='<li><img src="'+P.media.m+'"/><div>'+P.title+"</div></li>"},this));N+="</ul>";this._$scroller.empty().append(N);this.init()},this))}};function n(M){var P=M.length;while(--P>0){var N=Math.floor(Math.random()*(P+1)),O=M[P];M[P]=M[N];M[N]=O}}function x(M){M.preventDefault()}function a(M){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){if(typeof M==="undefined"){return true}var N=new Number(RegExp.$1);if(N<=M){return true}}return false}function l(M){return(typeof M==="undefined"||""===u.trim(M))}function G(M,N){M=parseInt(M,0);return(isNaN(M)||M<=0)?N:M}function F(M,N){M=parseInt(M,0);return(isNaN(M)||M<0)?N:M}function B(M,N){return(typeof M!=="undefined")?M:N}function A(M){if(M.match(/[^\s]+\.(jpg|gif|png|bmp)/i)){return"image"}if(M.match(/[^\s]+\.(swf)/i)){return"flash"}if(0===M.indexOf("#")){return"inline"}return"iframe"}function j(T){var R=["Webkit","Moz","O","ms"],Q=document.body||document.documentElement,O=Q.style,N=false;if(typeof O[T]!=="undefined"){N=T}else{var P=T.charAt(0).toUpperCase()+T.slice(1);for(var M=0;M<R.length;M++){var S=R[M]+P;if(typeof O[S]!=="undefined"){N=S;break}}}u.support[T]=N;return N}var w={previous:function(){u(this).data(t).prevSlide()},next:function(){u(this).data(t).nextSlide()},play:function(){u(this).data(t).play()},pause:function(){u(this).data(t).pause()},destroy:function(){var M=u(this).data(t);M.pause();if(!l(M._namespace)){u(window).add(u(document)).unbind(M._namespace)}M._$scroller.add(u("*",M._$scroller)).unbind().removeData();u(this).removeData(t)}};var v={responsive:false,collapsible:false,orientation:"horizontal",title:"",numDisplay:4,slideWidth:300,slideHeight:200,slideMargin:0,slideBorder:0,padding:10,captionHeight:"auto",startIndex:0,autoPlay:false,delay:5000,speed:800,easing:"",playOnce:false,pauseOnHover:false,pauseOnInteraction:false,moveByOne:false,control:"index",navButtons:"normal",playButton:true,captionButton:false,captionAlign:"bottom",captionPosition:"inside",captionEffect:"fade",imagePosition:"fill",continuous:true,shuffle:false,mousewheel:false,keyboard:false,swipe:true,pageInfo:true,onInit:function(){},onPlay:function(){},onPause:function(){},onPrevious:function(){},onNext:function(){},onBegin:function(){},onEnd:function(){}};u.fn.thumbScroller=function(){var M=arguments;var N=M[0];return this.each(function(Q,O){if(w[N]){if(typeof u(O).data(t)!=="undefined"){w[N].apply(O,Array.prototype.slice.call(M,1))}}else{if(typeof N==="object"||!N){var P=new i(O,u.extend({},v,N));u(O).data(t,P);P._$scroller.trigger(s);P._options.onInit.call(P)}}})}})(jQuery);